---
import type { CollectionEntry } from 'astro:content'

interface Props {
  content: CollectionEntry<any>
}

const { content } = Astro.props

const items = Array.from({ length: 20 }, (_, index) => ({
  id: index + 1,
  title: `Documentation Item ${index + 1}`,
  description: `This is the description for documentation item number ${index + 1}.`,
}))

// Navigation links
const prevLink = {
  text: 'Plugins',
  url: '/plugins',
}

const nextLink = {
  text: 'Static site generation',
  url: '/static-site-generation',
}
---

<style>
  a {
    color: oklch(44.6% 0.03 256.802);
  }
  a:hover {
	color: oklch(44.6% 0.03 256.802);
}
</style>

<div class="flex flex-col md:flex-row flex-grow">
  <!-- Sidebar -->
  <div
    class="w-full md:w-xs p-3 border-b md:border-r-2 md:border-b-0 border-gray-200"
  >
    <h3 class="text-gray-700 font-medium mb-2">Documentation</h3>
    <ul class="space-y-1">
      <!-- Introduction with nested Getting Started -->
      <li class="sidebar-item">
        <button
          class="w-full text-left flex items-center justify-between px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg font-medium"
        >
          <span>Introduction</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 transform transition-transform chevron"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <!-- Nested menu item (hidden by default) -->
        <ul class="pl-6 mt-1 space-y-1 nested-menu hidden">
          <li>
            <a
              href="#"
              class="flex items-center px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 mr-1 text-gray-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              Getting Started
            </a>
          </li>
        </ul>
      </li>

      <!-- Guides -->
      <li class="sidebar-item">
        <button
          class="w-full text-left flex items-center justify-between px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
        >
          <span>Guides</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 transform transition-transform chevron"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <ul class="pl-6 mt-1 space-y-1 nested-menu hidden">
          <li>
            <a
              href="#"
              class="block px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
              >Basic Guide 1</a
            >
          </li>
          <li>
            <a
              href="#"
              class="block px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
              >Basic Guide 2</a
            >
          </li>
        </ul>
      </li>

      <!-- Advanced Guides -->
      <li class="sidebar-item">
        <button
          class="w-full text-left flex items-center justify-between px-3 py-1 text-blue-600 hover:bg-gray-200 rounded text-lg font-medium"
        >
          <span>Advanced Guides</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 transform transition-transform chevron"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <ul class="pl-6 mt-1 space-y-1 nested-menu hidden">
          <li>
            <a
              href="#"
              class="block px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
              >Advanced Topic 1</a
            >
          </li>
          <li>
            <a
              href="#"
              class="block px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
              >Advanced Topic 2</a
            >
          </li>
        </ul>
      </li>

      <!-- Configuration with nested Examples -->
      <li class="sidebar-item">
        <button
          class="w-full text-left flex items-center justify-between px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
        >
          <span>Configuration</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 transform transition-transform chevron"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <!-- Nested menu item (hidden by default) -->
        <ul class="pl-6 mt-1 space-y-1 nested-menu hidden">
          <li>
            <a
              href="#"
              class="flex items-center px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 mr-1 text-gray-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h7"></path>
              </svg>
              Examples
            </a>
          </li>
        </ul>
      </li>

      <!-- Upgrading -->
      <li class="sidebar-item">
        <button
          class="w-full text-left flex items-center justify-between px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
        >
          <span>Upgrading</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 transform transition-transform chevron"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <ul class="pl-6 mt-1 space-y-1 nested-menu hidden">
          <li>
            <a
              href="#"
              class="block px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
              >Version 2.0</a
            >
          </li>
          <li>
            <a
              href="#"
              class="block px-3 py-1 text-gray-600 hover:bg-gray-200 rounded text-lg"
              >Version 3.0</a
            >
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Content -->
  <div class="flex-1 p-4 flex flex-col">
    <!-- Main content -->
    <div class="flex-grow">
      <h2 class="text-lg font-medium mb-3">Documentation</h2>
      <p class="text-gray-700 mb-3">
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Debitis earum
        corporis repellendus nemo aspernatur soluta omnis unde facere magnam?
        Ipsa ducimus voluptatibus eveniet esse similique at tenetur vero sint
        veritatis!
      </p>
      {
        items.slice(0, 3).map((item) => (
          <div class="border-b border-gray-200 py-3 last:border-0">
            <h3 class="font-medium text-gray-800">{item.title}</h3>
            <p class="text-gray-600 text-lg">{item.description}</p>
          </div>
        ))
      }
    </div>

    <!-- Navigation buttons at bottom of content -->
    <div class="mt-8 pt-4 border-t border-gray-200">
      <div class="grid grid-cols-2 gap-4">
        <a
          href={prevLink.url}
          class="w-full border border-gray-200 rounded-md p-3 hover:border-blue-600 transition-colors"
        >
          <div class="text-gray-500 text-lg">Previous</div>
          <div class="text-blue-600 font-medium">« {prevLink.text}</div>
        </a>
        <a
          href={nextLink.url}
          class="w-full border border-gray-200 rounded-md p-3 hover:border-blue-600 transition-colors text-right"
        >
          <div class="text-gray-500 text-lg">Next</div>
          <div class="text-blue-600 font-medium">{nextLink.text} »</div>
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  // Add event listeners after the DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    const sidebarItems = document.querySelectorAll('.sidebar-item')

    sidebarItems.forEach((item) => {
      const button = item.querySelector('button')
      const nestedMenu = item.querySelector('.nested-menu')
      const chevron = item.querySelector('.chevron')

      button?.addEventListener('click', () => {
        // Toggle the nested menu visibility
        nestedMenu?.classList.toggle('hidden')

        // Rotate the chevron icon
        if (nestedMenu?.classList.contains('hidden')) {
          chevron?.classList.remove('rotate-180')
        } else {
          chevron?.classList.add('rotate-180')
        }
      })
    })
  })
</script>
