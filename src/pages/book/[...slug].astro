---
import { type CollectionEntry, getCollection, render } from 'astro:content'
import BaseHead from '../../components/BaseHead.astro'
import Header from '../../components/Header.astro'
import SideBar from '../../components/SideBar.astro'
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts'

export async function getStaticPaths() {
  const books = await getCollection('book')
  return books.map((book) => ({
    params: { slug: book.id },
    props: book,
  }))
}
type Props = CollectionEntry<'book'>

const content = Astro.props

const { Content } = await render(content)
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="flex flex-col min-h-screen">
    <Header />
    <SideBar content={content} />
  </body>
</html>
